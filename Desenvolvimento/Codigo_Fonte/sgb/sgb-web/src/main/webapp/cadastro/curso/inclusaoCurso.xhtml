<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--@autor: Diogo Goncalves Teodoro-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="default.css" library="css"/>
        <title>Cadastrar Curso</title>
    </h:head>

    <h:body>   

        <h:form id="header" style="">
            <h:panelGrid width="100%" style="float: left" columns="1" >
                <h:panelGrid columns="4">
                    <h:outputLabel value="#{msg['cadastro.curso.label.nome']}:" for="nomeCurso" />
                    <p:inputText value="#{cursoController.form.entity.nome}" id="nomeCurso" size="65" required="true" />
                    <h:outputLabel value="#{msg['cadastro.curso.label.vagas']}:" for="qtdVagas" />
                    <p:inputText value="#{cursoController.form.entity.vagas}" id="qtdVagas" size="15" required="true" />
                </h:panelGrid>
                <h:panelGrid width="100%" columns="2" >
                    <p:commandButton value="#{msg['cadastro.curso.panel.cadastrar']}" 
                                    type="submit" oncomplete="confirmation.show()"/>

                    <p:commandButton value="#{msg['acao.voltar']}" 
                                     action="/index.xhtml"
                                     type="submit" />
                    <p:confirmDialog  message="Confirma Cadastro do Curso?" closable="false" header="Aviso" severity="alert" widgetVar="confirmation" style="float: top">  
                        <p:commandButton id="btnSim" value="Sim" oncomplete="confirmation.hide()" process="@this" action="#{cursoService.DAO.save(cursoController.form.entity)}"/>  
                        <p:commandButton id="btnNao" value="NÃ£o" onclick="confirmation.hide()" type="#{cursoController.form.clearInsertData()}"/>  
                    </p:confirmDialog>  
                </h:panelGrid>

            </h:panelGrid>
            <br></br> <br></br>
            <br></br>
            <!--action="#{cursoService.DAO.save(cursoController.form.entity)}"-->

        </h:form>
        <br></br> <br></br>

        <h:form>

            <h:panelGrid width="100%">
                <p:fieldset legend="AssociaÃ§Ã£o Disciplina/Curso">
                    <h:panelGrid columns="2" style="float: left" cellspacing="20">

                        <h:outputLabel value="#{msg['cadastro.disciplina']}:" for="disciplina" />
                        <p:selectOneMenu id="cursos" value="#{disciplinaController.form.collectionEntities}"  style="width: 500px">
                            <f:selectItem itemLabel="Selecione a Disicplina"/>
                            <f:selectItems value="#{disciplinaController.form.collectionEntities}" rendered="true" var="disciplinaList"
                                           itemLabel="#{disciplinaList.nome}" itemValue="#{disciplinaList.id}"/>
                        </p:selectOneMenu>

                       <br></br>
                        <p:commandButton value="#{msg['cadastro.associar.disciplina']}" 
                                         action="#{cursoController.insert()}"
                                         type="submit" />
                    </h:panelGrid>
                    <br></br>
                    <br></br>
                    <br></br>
                    <br></br>
                    <!--                        <p:dataTable id="associationTable" var="assTab" 
                                        value="#{cursoController.form.collectionEntities}"
                                        paginator="true" rows="5"
                                        paginatorTemplate="{CurrentPageReport}  
                                        {FirstPageLink} {PreviousPageLink} 
                                        {PageLinks} {NextPageLink} {LastPageLink} 
                                        {RowsPerPageDropdown}"
                                        rowsPerPageTemplate="5,10,15">-->


                    <p:dataTable id="associationTable" var="assTab" 
                                 value="#{cursoController.form.collectionEntities}">
                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="#{msg['cadastro.curso']}" />  
                            </f:facet>  
                            <h:outputText value="#{assTab.nome}" />  
                        </p:column> 
                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="#{msg['cadastro.disciplina']}" />  
                            </f:facet>  
                            <h:outputText value="#{assTab.disciplina}" />  
                        </p:column>
                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="#{msg['cadastro.acao']}" />  
                            </f:facet>  
                            <h:commandLink id="linkAcao" 
                                           value="Remover" 
                                           action="#{cursoController.service.remove(cursoController)}"/> 
                        </p:column> 

                    </p:dataTable>


                </p:fieldset>
            </h:panelGrid>
        </h:form>
    </h:body>  

</html>
