<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/template/template.xhtml">

        <ui:define name="title">
            Cadastro de Disciplina - SGB
        </ui:define>

        <ui:define name="content">
            <h:form prependId="false">
                <p:panel header="Cadastrar Disciplina">

                    <p:messages autoUpdate="true"/>

                    <h:panelGrid columns="3">
                        <p:column>
                            <h:outputLabel value="Nome: " for="disciplinaNome" />
                            <h:inputText value="#{disciplinaController.form.entity.nome}" id="disciplinaNome"/>
                        </p:column>

                        <p:column>
                            <h:outputLabel value="Código: " for="disciplinaCodigo" />
                            <h:inputText value="#{disciplinaController.form.entity.codigo}" id="disciplinaCodigo" />
                        </p:column>

                        <p:column>
                            <h:outputLabel value="Curso: " for="curso_selectone" style="vertical-align: 40%"/>
                            <p:selectOneMenu id="curso_selectone" value="#{disciplinaController.form.entity.curso}"
                                             style=" width : 300px;"
                                             converter="cursoConverter">
                                <f:selectItem itemLabel="Curso" />
                                <f:selectItems value="#{disciplinaController.form.cursos}" var="curso" itemLabel="#{curso.nome}" itemValue="#{curso}"/>
                            </p:selectOneMenu>   
                        </p:column>

                    </h:panelGrid>

                </p:panel>
                <p:panel>



                    <fieldset style="width: 800px">
                        <legend>Bibliografia</legend>

                        <p:panel>
                            <p:panelGrid styleClass="semborda">

                                <p:row>
                                    <p:column>
                                        <h:outputLabel value="Tipo da Bibliografia: " style="float: right;"/>
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu    id="tipo" value="#{disciplinaController.form.entity.id}"
                                                            style=" width : 300px;" >
                                            <f:selectItem itemLabel="Selecione" />
                                            <f:selectItems value="#{disciplinaController.form.tiposBibliografia}" />
                                        </p:selectOneMenu> 
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column>
                                        <h:outputLabel value="Título do livros: " for="autoCompleteLivro"/>
                                    </p:column>
                                    <p:column>
                                        <p:autoComplete id="autoCompleteLivro" 
                                                        value="#{disciplinaController.form.entity.bibliografias.livro}"
                                                        completeMethod="#{livroController.complete}"  
                                                        var="livro" itemLabel="#{livro.titulo}" 
                                                        itemValue="#{livro}" 
                                                        converter="livroConverter"  
                                                        multiple="true"/>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>

                        <p:commandButton action="#{disciplinaController.insert}" 
                                         value="Vincular Bibliografia"/>
                        
                        <p:panel>

                            <p:dataTable value="#{disciplinaController.form.entity.bibliografias}" var="bibliografia" emptyMessage="Sem bibliografias cadastradas">

                                <p:column headerText="Tipo de Bibliografia">
                                    <h:outputText value="#{bibliografia.tipo}" />
                                </p:column>

                                <p:column headerText="Título do livro">
                                    <h:outputText value="#{bibliografia.livro.titulo}" />
                                </p:column>

                                <p:column headerText="Ações">
                                    <h:panelGrid columns="3" width="100%">
                                        <p:commandButton value="Remover" action="#{usuarioController.remove}" update="@all">
                                            <f:setPropertyActionListener value="#{usuario}" target="#{usuarioController.form.entity}" />
                                            <f:param name="entityID" value="#{usuario.id}" />
                                        </p:commandButton>
                                    </h:panelGrid>
                                </p:column>

                            </p:dataTable>

                        </p:panel>
                    </fieldset>
                    
                    <h:panelGrid columns="2" style="float: right;">
                        <p:commandButton actionListener="#{disciplinaController.insert}" 
                                         value="#{msg['cadastro.usuario.button.insert']}"
                                         ajax="false"
                                         action="#{disciplinaController.openInitialPage()}"/>
                        
                        <p:commandButton action="#{disciplinaController.openInitialPage()}"
                                         value="#{msg['acao.voltar']}"  
                                         ajax="false"/>
                    </h:panelGrid>

                </p:panel>
            </h:form>
        </ui:define>
    </ui:composition>
</html>