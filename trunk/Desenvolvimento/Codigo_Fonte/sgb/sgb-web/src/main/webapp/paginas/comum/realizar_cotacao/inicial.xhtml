<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/template/template.xhtml">

        <ui:define name="content">

            <h:form id="formInicialCotacao" style="font-size: 14px;">

                <p:messages/>

                <p:panel header="#{msg['label.cotacao.cotarLivro']}">

                    <p:spacer width="15px" height="20px"/>

                    <h:panelGrid width="100%" columns="1">

                        <p:dataTable id="livros_datatable" value="#{realizarCotacaoController.form.livroDataModel}"
                                     var="livro" paginator="true" rows="10"
                                     selection="#{realizarCotacaoController.form.livrosSelecionados}"
                                     resizableColumns="true"
                                     emptyMessage="#{msg['arquitetura.label.nenhumregitro']}">

                            <p:column style="width: 18px;" selectionMode="multiple"/>

                            <p:column headerText="#{msg['label.cotacao.titulo']}"
                                      filterBy="#{livro.titulo}">  

                                <h:outputText value="#{livro.titulo}" 
                                              title="#{livro.titulo}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.autor']}"
                                      filterBy="#{livro.autores}" style="text-align: center;">  

                                <ui:repeat value="#{livro.autores}" var="autor">

                                    <h:outputText value="#{autor.sobrenome}, #{autor.nome}" 
                                                  title="#{autor.sobrenome}, #{autor.nome}"/>  

                                </ui:repeat>

                            </p:column>

                            <p:column headerText="#{msg['label.cotacao.edicao']}">  

                                <h:outputText value="#{livro.edicao}" 
                                              title="#{livro.edicao}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.ano']}">  

                                <h:outputText value="#{livro.ano}"
                                              title="#{livro.ano}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.editora']}">  

                                <h:outputText value="#{livro.editora.nome}" 
                                              title="#{livro.editora.nome}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.isbn13']}">  

                                <h:outputText value="#{livro.isbn13}" 
                                              title="#{livro.isbn13}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.disciplina']}">  

                                <h:outputText value="#{livro.disciplinasAsString}"
                                              title="#{livro.disciplinasAsString}"/>  

                            </p:column> 

                            <p:column headerText="#{msg['label.cotacao.estrangeiro']}">  

                                <h:outputText value="#{msg['arquitetura.msg.sim']}" rendered="#{livro.estrangeiro}" />  

                                <h:outputText value="#{msg['arquitetura.msg.nao']}" rendered="#{not livro.estrangeiro}"/>  

                            </p:column> 

                        </p:dataTable>

                        <p:spacer height="15" width="5"/>


                        <p:commandButton value="#{msg['label.cotacao.realizarCotacao']}"
                                         action="#{realizarCotacaoController.realizarCotacao()}"
                                         icon="ui-icon-cart"/>
                    </h:panelGrid>

                </p:panel>

            </h:form>

        </ui:define>

    </ui:composition>

</html>