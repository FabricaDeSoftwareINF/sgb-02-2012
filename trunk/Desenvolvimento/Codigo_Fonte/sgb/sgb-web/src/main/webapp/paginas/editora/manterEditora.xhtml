<?xml version="1.0" encoding="UTF-8"?>
<!--@autor: wilker de jesus machado-->
<!DOCTYPE html>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:ui="http://java.sun.com/jsf/facelets"  
              xmlns:h="http://java.sun.com/jsf/html"  
              xmlns:p="http://primefaces.org/ui"
              xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/template/template.xhtml">

        <ui:define name="content">

            <h:form id="busca">

                <h:panelGrid width="100%" columns="2">

                    <h:panelGrid width="100%" columns="1">

                        <p:messages id="messages" autoUpdate="true"></p:messages>

                        <p:dataTable id="associationTable" var="assTab" 
                                     value="#{editoraController.form.collectionEntities}">
                            <p:column>  

                                <p:selectBooleanCheckbox >
                                    <p:ajax listener="#{editoraController.selecionaEditora(assTab)}" />
                                </p:selectBooleanCheckbox>

                            </p:column> 

                            <p:column sortBy="#{assTab.nome}" filterBy="#{assTab.nome}">  
                                <f:facet name="header">  
                                    <h:outputText value="#{msg['cadastro.editora.label.nome']}" />  
                                </f:facet>  
                                <h:outputText value="#{assTab.nome}" />  
                            </p:column> 

                            <p:column>  
                                <f:facet name="header">  
                                    <h:outputText value="#{msg['cadastro.acao']}" />  
                                </f:facet>  
                                <p:commandLink id="linkAcaoEditar" 
                                               value="#{msg['acao.editar']}" type="button"
                                               action="#{editoraController.openEditPage(assTab)}"/>

                                <p:spacer height="1" width="15"/>

                                <p:commandLink id="linkAcaoExcluir" 
                                               value="excluir" onclick="confirmacao.show()" type="button"
                                               action="#{editoraController.preparaEditora(assTab)}"/> 

                            </p:column> 
                        </p:dataTable>

                        <h:panelGrid columns="2" cellpadding="10">
                            <p:commandButton action="#{editoraController.openInsertPage()}"  value="Novo"></p:commandButton>
                            <p:commandButton update="@form" action="#{editoraController.removerEditoraSelecionadas()}" value="Remover Selecionadas"></p:commandButton>
                        </h:panelGrid>

                    </h:panelGrid>

                </h:panelGrid>
                <p:confirmDialog message="Tem certeza que deseja excluir o resgistro?"  
                                 header="Confirmação" severity="alert" widgetVar="confirmacao">  

                    <p:commandButton value="Sim" update="@form" oncomplete="confirmacao.hide()"  
                                     action="#{editoraController.removerEditora()}" />  
                    <p:commandButton value="Não" onclick="confirmacao.hide()" type="button" />   

                </p:confirmDialog>  

            </h:form>

        </ui:define>

    </ui:composition>

</ui:component>  
